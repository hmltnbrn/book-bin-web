<app-loading-spinner *ngIf="isLoading"></app-loading-spinner>
<div class="center-indicator">
  <app-error-indicator [errorText]="apiError"></app-error-indicator>
</div>
<div class="center-indicator" *ngIf="isSuccess">
  <app-success-indicator [successText]="'Password successfully changed'"></app-success-indicator>
</div>
<p class="info">
  Please enter and confirm your new password.
</p>
<form id="reset-password-form" class="form-container" [formGroup]="passwordForm" novalidate>
  <mat-form-field>
    <input matInput [autofocus]="true" placeholder="Old Password" [type]="hide ? 'password' : 'text'" formControlName="oldPassword" required>
    <mat-icon matSuffix (click)="hide = !hide">{{hide ? 'visibility' : 'visibility_off'}}</mat-icon>
    <mat-error *ngIf="passwordForm.controls.oldPassword.invalid">{{getErrorMessage(passwordForm.controls.oldPassword, 'oldPassword')}}</mat-error>
  </mat-form-field>
  <mat-form-field>
    <input matInput [autofocus]="true" placeholder="New Password" [type]="hide ? 'password' : 'text'" formControlName="newPassword" required>
    <mat-icon matSuffix (click)="hide = !hide">{{hide ? 'visibility' : 'visibility_off'}}</mat-icon>
    <mat-error *ngIf="passwordForm.controls.newPassword.invalid">{{getErrorMessage(passwordForm.controls.newPassword, 'newPassword')}}</mat-error>
    <mat-hint *ngIf="passwordForm.controls.newPassword.invalid">Must contain a number, capital letter, special character, and be at least 8 characters</mat-hint>
  </mat-form-field>
  <mat-form-field>
    <input matInput placeholder="Confirm Password" [type]="hide ? 'password' : 'text'" formControlName="confirmPassword" required>
    <mat-icon matSuffix (click)="hide = !hide">{{hide ? 'visibility' : 'visibility_off'}}</mat-icon>
    <mat-error *ngIf="passwordForm.controls.confirmPassword.invalid">{{getErrorMessage(passwordForm.controls.confirmPassword, 'confirmpassword')}}</mat-error>
  </mat-form-field>
  <button type="button" mat-raised-button color="primary" [disabled]="passwordForm.invalid" (click)="onSubmit()">Engage</button>
</form>
